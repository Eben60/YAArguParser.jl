<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · YAArguParser.jl</title><meta name="title" content="Usage · YAArguParser.jl"/><meta property="og:title" content="Usage · YAArguParser.jl"/><meta property="twitter:title" content="Usage · YAArguParser.jl"/><meta name="description" content="Documentation for YAArguParser.jl."/><meta property="og:description" content="Documentation for YAArguParser.jl."/><meta property="twitter:description" content="Documentation for YAArguParser.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">YAArguParser.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Preface</a></li><li class="is-active"><a class="tocitem" href>Usage</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Specification"><span>Specification</span></a></li><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li></ul></li><li><a class="tocitem" href="../finally/">Changelog, Related packages, License</a></li><li><a class="tocitem" href="../docstrings/">Docstrings</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Eben60/YAArguParser.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Eben60/YAArguParser.jl/blob/master/docs/src/usage.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>As usual, e.g.</p><pre><code class="language-julia hljs">] add YAArguParser</code></pre><h2 id="Specification"><a class="docs-heading-anchor" href="#Specification">Specification</a><a id="Specification-1"></a><a class="docs-heading-anchor-permalink" href="#Specification" title="Permalink"></a></h2><p>We approximate the <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/command-line-syntax-key">Microsoft command-line syntax</a>. Optional arguments are surrounded by square brackets, values are surrounded by angle brackets (chevrons), and mutually exclusive items are separated by a vertical bar. </p><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p>Apart from these usage examples (you find the complete sources in the<code>./examples</code> folder), we suggest you also check the the testsuite <code>./test/runtests.jl</code> .</p><h3 id="Example-1-common-usage"><a class="docs-heading-anchor" href="#Example-1-common-usage">Example 1 - common usage</a><a id="Example-1-common-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Example-1-common-usage" title="Permalink"></a></h3><p>We first create an <code>ArgumentParser</code> object, then add and parse our command-line arguments. We will automagically generate a <code>usage</code> string from our key-value store of command-line arguments here, but is also possible to write your own help message instead. </p><pre><code class="language-julia hljs">using YAArguParser: ArgumentParser, add_argument!, add_example!, help, parse_args!, args_pairs, generate_usage!

function main()

    ap = ArgumentParser(description=&quot;YAArguParser example.&quot;, add_help=true)
    add_argument!(ap, &quot;-h&quot;, &quot;--help&quot;, type=Bool, default=false, description=&quot;Help switch.&quot;)
    add_argument!(ap, &quot;-i&quot;, &quot;--input&quot;, type=String, default=&quot;filename.txt&quot;, description=&quot;Input file.&quot;)
    add_argument!(ap, &quot;-n&quot;, &quot;--number&quot;, type=Int, default=0, description=&quot;Integer number.&quot;)
    add_argument!(ap, &quot;-v&quot;, &quot;--verbose&quot;, type=Bool, default=false, description=&quot;Verbose mode switch.&quot;)
    add_example!(ap, &quot;julia $(ap.filename) --input dir/file.txt --number 10 --verbose&quot;)
    add_example!(ap, &quot;julia $(ap.filename) --help&quot;)

    parse_args!(ap)

    # get all arguments as NamedTuple
    args = NamedTuple(args_pairs(ap))

    # print the usage/help message in magenta if asked for help
    args.help &amp;&amp; help(ap, color=&quot;magenta&quot;)

    # display the arguments
    println(args)

    # DO SOMETHING ELSE

    return 0
end

main()</code></pre><p>That is about as simple as it gets and closely follows Python&#39;s <a href="https://docs.python.org/3/library/argparse.html"><code>argparse</code></a>. </p><h3 id="Example-2-customized-help"><a class="docs-heading-anchor" href="#Example-2-customized-help">Example 2 - customized help</a><a id="Example-2-customized-help-1"></a><a class="docs-heading-anchor-permalink" href="#Example-2-customized-help" title="Permalink"></a></h3><p>Now let&#39;s define a customized help message:</p><pre><code class="language-julia hljs">using YAArguParser

const usage = raw&quot;&quot;&quot;
  Usage: main.jl --input &lt;PATH&gt; [--verbose] [--problem] [--help]

  A Julia script with command-line arguments.

  Options:
    -i, --input &lt;PATH&gt;    Path to the input file.
    -v, --verbose         Enable verbose message output.
    -p, --problem         Print the problem statement.
    -h, --help            Print this help message.

  Examples:
    $ julia main.jl --input dir/file.txt --verbose
    $ julia main.jl --help
&quot;&quot;&quot;

function main()

    ap = ArgumentParser(description=&quot;YAArguParser example.&quot;, add_help=true, color=&quot;cyan&quot;)
    add_argument!(ap, &quot;-h&quot;, &quot;--help&quot;, type=Bool, default=false, description=&quot;Help switch.&quot;)
    add_argument!(ap, &quot;-i&quot;, &quot;--input&quot;, type=String, default=&quot;filename.txt&quot;, description=&quot;Input file.&quot;)
    add_argument!(ap, &quot;-n&quot;, &quot;--number&quot;, type=Int, default=0, description=&quot;Integer number.&quot;)
    add_argument!(ap, &quot;-v&quot;, &quot;--verbose&quot;, type=Bool, default=false, description=&quot;Verbose mode switch.&quot;)
    add_example!(ap, &quot;julia $(ap.filename) --input dir/file.txt --number 10 --verbose&quot;)
    add_example!(ap, &quot;julia $(ap.filename) --help&quot;)

    # add usage/help text from above
    ap.usage = usage

    parse_args!(ap)

    # print the usage/help message in color defined in ap
    help(ap)

    # DO SOMETHING ELSE

    return 0
end

main()</code></pre><h3 id="Example-3-validating-arguments"><a class="docs-heading-anchor" href="#Example-3-validating-arguments">Example 3 - validating arguments</a><a id="Example-3-validating-arguments-1"></a><a class="docs-heading-anchor-permalink" href="#Example-3-validating-arguments" title="Permalink"></a></h3><p>For Validator details, read Docstrings sections for <a href="../docstrings/#YAArguParser.RealValidator"><code>RealValidator</code></a>, <a href="../docstrings/#YAArguParser.StrValidator"><code>StrValidator</code></a> and <a href="../docstrings/#YAArguParser.validate"><code>validate</code></a>.</p><pre><code class="language-julia hljs">using YAArguParser
using YAArguParser: shell_split

function main()

    ap = ArgumentParser(; 
        description=&quot;Command line options parser&quot;, 
        add_help=true, 
        color = &quot;cyan&quot;, 
        )

    add_argument!(ap, &quot;-p&quot;, &quot;--plotformat&quot;; 
        type=String, 
        default=&quot;PNG&quot;,
        description=&quot;Accepted file format: PNG (default), PDF, SVG or NONE&quot;, 
        validator=StrValidator(; upper_case=true, patterns=[&quot;PNG&quot;, &quot;SVG&quot;, &quot;PDF&quot;, &quot;NONE&quot;]),
        )

    add_argument!(ap, &quot;-n&quot;, &quot;--number&quot;; 
        type=Int, 
        # an argument with a default value is optional, without - required 
        # default=nothing,
        description=&quot;an integer value ranging from 0 to 42&quot;, 
        validator=RealValidator{Int}(; incl_ivls=[(0, 42)]),
        )
    
    add_example!(ap, &quot;$(ap.filename) -n 1 --plotformat NONE&quot;)
    add_example!(ap, &quot;$(ap.filename) -n 1&quot;)
    add_example!(ap, &quot;$(ap.filename) --help&quot;)

    # simulate supplied args
    str = &quot;-p SVG -n 33 --help&quot;
    args = shell_split(str)

    parse_args!(ap; cli_args=args)

    # get all arguments as NamedTuple
    args = NamedTuple(args_pairs(ap))

    # print the usage/help message in color defined during initialization, if asked for help
    args.help &amp;&amp; help(ap)

    # display the arguments
    println(args)

    # DO SOMETHING with args

    return ap
end

main()</code></pre><h3 id="Example-4-custom-parser,-initparser"><a class="docs-heading-anchor" href="#Example-4-custom-parser,-initparser">Example 4 - custom parser, <code>initparser</code></a><a id="Example-4-custom-parser,-initparser-1"></a><a class="docs-heading-anchor-permalink" href="#Example-4-custom-parser,-initparser" title="Permalink"></a></h3><p>This example shows how to create a customized parser. Here, we create <code>LegacyArgumentParser</code> type which is equivalent to <code>ArgumentParser</code>  of <a href="https://github.com/admercs/SimpleArgParse.jl"><code>SimpleArgParse</code></a>. You see that by making our type a subtype of  <a href="../docstrings/#YAArguParser.AbstractArgumentParser"><code>AbstractArgumentParser</code></a> we achieve a flattened access to the <code>struct</code> properties. This is used by <a href="../docstrings/#YAArguParser.initparser"><code>initparser</code></a> function, which simplifies initilalization of nested structs.</p><pre><code class="language-julia hljs">using YAArguParser
using YAArguParser: AbstractArgumentParser

@kwdef mutable struct LegacyArgumentParser &lt;: AbstractArgumentParser
    ap::ArgumentParser = ArgumentParser()
    authors::Vector{String} = String[]
    documentation::String = &quot;&quot;
    repository::String = &quot;&quot;
    license::String = &quot;&quot;
end

lp = initparser(LegacyArgumentParser; license=&quot;MIT&quot;, authors=[&quot;Eben60&quot;], description=&quot;Example how to extend an argument parser&quot;)
@assert lp.ap.description == lp.description</code></pre><h3 id="Example-5-positional-arguments,-custom-validator,-initparser"><a class="docs-heading-anchor" href="#Example-5-positional-arguments,-custom-validator,-initparser">Example 5 - positional arguments, custom validator, <code>initparser</code></a><a id="Example-5-positional-arguments,-custom-validator,-initparser-1"></a><a class="docs-heading-anchor-permalink" href="#Example-5-positional-arguments,-custom-validator,-initparser" title="Permalink"></a></h3><pre><code class="language-julia hljs">using Dates
using YAArguParser
using YAArguParser: AbstractValidator, warn_and_return
import YAArguParser: validate

@kwdef struct FullAgeValidator &lt;: AbstractValidator
    legal_age::Int = 18
end

function validate(v::Union{AbstractString, Date}, vl::FullAgeValidator)
    birthdate = today()
    try
        birthdate = Date(v)
    catch
        return warn_and_return(v)
    end

    d = day(birthdate)
    m = month(birthdate)
    fullageyear = year(birthdate) + vl.legal_age

    Date(fullageyear, m, d) &gt; today() &amp;&amp; return warn_and_return(v)

    return (; ok=true, v=birthdate)
end

function askandget(pp; color=pp.color)
    colorprint(pp.introduction, color)
    colorprint(pp.prompt, color, false; bold=true)
    answer = readline()
    cli_args = Base.shell_split(answer)
    parse_args!(pp; cli_args)
    r = NamedTuple(args_pairs(pp))
    if r.help
        help(pp)
        exit()
    end
    r.abort &amp;&amp; exit()
    return r
end

function main()

    color = &quot;cyan&quot;
    prompt = &quot;legal age check&gt; &quot;

    ask_full_age = let
        pp = initparser(InteractiveArgumentParser;  
            description=&quot;Asking if one is of full age&quot;, 
            add_help=true, 
            color = color,
            introduction=&quot;Are you of full legal age? Please type y[es] or n[o] and press &lt;ENTER&gt;&quot;,
            throw_on_exception = true,
            prompt=prompt,
            )

        add_argument!(pp, &quot;-y&quot;, &quot;--yes_no&quot;; 
            type=String, 
            positional=true,
            description=&quot;Asking about legal age&quot;,
            validator=StrValidator(; upper_case=true, starts_with=true, patterns=[&quot;yes&quot;, &quot;no&quot;]),
            )
    
        add_argument!(pp, &quot;-a&quot;, &quot;--abort&quot;, 
            type=Bool, 
            default=false,
            description=&quot;Abort?&quot;,
            )   
        
        add_example!(pp, &quot;$(pp.prompt) y&quot;)
        add_example!(pp, &quot;$(pp.prompt) --abort&quot;)
        add_example!(pp, &quot;$(pp.prompt) --help&quot;)
        pp
    end

    check_full_age = let
        pp = initparser(InteractiveArgumentParser; 
            description=&quot;Checking if one is of full age&quot;, 
            add_help=true, 
            color=color, 
            throw_on_exception = true,
            introduction=&quot;Please enter your birth date in the yyyy-mm-dd format&quot;,
            prompt=prompt,
            )

        add_argument!(pp, &quot;-d&quot;, &quot;--birthdate&quot;; 
            type=Date, 
            positional=true,
            description=&quot;Asking about legal age&quot;,
            validator=FullAgeValidator(),
            )
    
        add_argument!(pp, &quot;-a&quot;, &quot;--abort&quot;, 
            type=Bool, 
            default=false, 
            description=&quot;Abort?&quot;,
            )   
        
        add_example!(pp, &quot;$(pp.prompt) 2000-02-29&quot;)
        add_example!(pp, &quot;$(pp.prompt) --abort&quot;)
        add_example!(pp, &quot;$(pp.prompt) --help&quot;)
        pp
    end

    (; yes_no ) = askandget(ask_full_age)
    yes = (yes_no == &quot;YES&quot;)
    yes || return false

    (; birthdate) = askandget(check_full_age )
    println(&quot;You appear to be of full age.&quot;)

    return true
end

main()</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Preface</a><a class="docs-footer-nextpage" href="../finally/">Changelog, Related packages, License »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Sunday 28 July 2024 09:37">Sunday 28 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
